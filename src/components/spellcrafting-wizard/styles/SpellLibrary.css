/* ========= SpellLibrary.css =========
 * Midnight Blue WoW-inspired UI for the spell library
 * Optimized for immersive RPG style
 * Includes styles for SpellbookWindow
 */

 @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Open+Sans:wght@400;600;700&display=swap');

 /* ========== VARIABLES ========== */
 :root {
   /* Primary colors - Midnight Blue theme */
   --library-primary: #1e3a8a;
   --library-primary-hover: #2563eb;
   --library-primary-glow: rgba(30, 58, 138, 0.5);
   --library-secondary: #1e293b;
   --library-tertiary: #0f172a;
   --library-quaternary: #0a101d;

   /* Text colors */
   --library-text-light: #e2e8f0;
   --library-text-muted: #94a3b8;
   --library-text-bright: #ffffff;

   /* Border colors */
   --library-border-light: #334155;
   --library-border-dark: #0f172a;
   --library-border-accent: #1e40af;

   /* Status colors */
   --library-success: #059669;
   --library-warning: #d97706;
   --library-danger: #b91c1c;

   /* Effect type colors - shared with SpellCard.css */
   --library-damage: #ef4444;
   --library-healing: #22c55e;
   --library-buff: #3b82f6;
   --library-debuff: #a855f7;
   --library-utility: #2dd4bf;
   --library-control: #38bdf8;
   --library-summoning: #8b5cf6;
   --library-transformation: #60a5fa;

   /* Dimensions */
   --sidebar-width: 280px;
   --header-height: 60px;
   --card-width: 220px;
   --card-height: 320px;

   /* Shadows */
   --library-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
   --library-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.5);
   --library-shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.7);

   /* Animation durations */
   --library-transition-fast: 150ms;
   --library-transition-normal: 300ms;
   --library-transition-slow: 500ms;
 }

 /* ========== GLOBAL/BASE STYLES ========== */
 * {
   box-sizing: border-box;
   margin: 0;
   padding: 0;
 }

 body {
   font-family: 'Open Sans', sans-serif;
   color: var(--library-text-light);
   background-color: var(--library-tertiary);
 }

 h1, h2, h3, h4, h5, h6 {
   font-family: 'Cinzel', serif;
   font-weight: 700;
   color: var(--library-text-light);
   margin-bottom: 0.5rem;
   letter-spacing: 0.5px;
   text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
 }

 button {
   cursor: pointer;
   font-family: 'Open Sans', sans-serif;
   border: none;
   background: none;
   outline: none;
   transition: all var(--library-transition-normal);
 }

 input, select {
   font-family: 'Open Sans', sans-serif;
   background-color: var(--library-tertiary);
   border: 1px solid var(--library-border-light);
   color: var(--library-text-light);
   padding: 0.5rem 0.75rem;
   border-radius: 3px;
   transition: all var(--library-transition-normal);
 }

 input:focus, select:focus {
   border-color: var(--library-primary-hover);
   box-shadow: 0 0 5px var(--library-primary-glow);
   outline: none;
 }

 /* ========== BUTTON STYLES ========== */
 .primary-button {
   background-color: var(--library-primary);
   color: white;
   border: 1px solid rgba(255, 255, 255, 0.2);
   border-radius: 3px;
   padding: 0.5rem 1rem;
   font-weight: 600;
   box-shadow: var(--library-shadow-sm), inset 0 1px 0 rgba(255, 255, 255, 0.15);
   position: relative;
   overflow: hidden;
   letter-spacing: 0.5px;
 }

 .primary-button:hover {
   background-color: var(--library-primary-hover);
   box-shadow: 0 0 10px var(--library-primary-glow);
   transform: translateY(-1px);
 }

 .primary-button:active {
   transform: translateY(1px);
   box-shadow: 0 0 5px var(--library-primary-glow);
 }

 .primary-button::after {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   height: 40%;
   background: linear-gradient(to bottom, rgba(255, 255, 255, 0.15), transparent);
   pointer-events: none;
 }

 .secondary-button {
   background-color: var(--library-tertiary);
   color: var(--library-text-light);
   border: 1px solid var(--library-border-light);
   border-radius: 3px;
   padding: 0.5rem 1rem;
   box-shadow: var(--library-shadow-sm), inset 0 1px 0 rgba(255, 255, 255, 0.05);
 }

 .secondary-button:hover {
   background-color: var(--library-secondary);
   border-color: var(--library-primary);
   box-shadow: 0 0 5px rgba(30, 58, 138, 0.3);
   transform: translateY(-1px);
 }

 .secondary-button:active {
   transform: translateY(1px);
 }

 /* ========== DECORATIVE ELEMENTS ========== */
 .wow-border {
   position: relative;
   border: 1px solid var(--library-border-light);
   border-radius: 3px;
   box-shadow: inset 0 0 10px rgba(30, 58, 138, 0.2);
 }

 .wow-border::before {
   content: '';
   position: absolute;
   top: -2px;
   left: -2px;
   right: -2px;
   bottom: -2px;
   border: 1px solid var(--library-border-dark);
   border-radius: 5px;
   pointer-events: none;
 }

 .wow-border::after {
   content: '';
   position: absolute;
   top: -1px;
   left: -1px;
   right: -1px;
   bottom: -1px;
   border-radius: 4px;
   box-shadow: inset 0 0 3px rgba(30, 58, 138, 0.3);
   pointer-events: none;
 }

 /* ========== SCROLLBAR STYLING ========== */
 ::-webkit-scrollbar {
   width: 10px;
   height: 10px;
 }

 ::-webkit-scrollbar-track {
   background: var(--library-quaternary);
   border-radius: 5px;
 }

 ::-webkit-scrollbar-thumb {
   background: var(--library-border-light);
   border-radius: 5px;
   border: 2px solid var(--library-quaternary);
 }

 ::-webkit-scrollbar-thumb:hover {
   background: var(--library-primary);
 }

 /* Firefox scrollbar */
 * {
   scrollbar-width: thin;
   scrollbar-color: var(--library-border-light) var(--library-quaternary);
 }

 /* ========== LAYOUT AND CONTAINERS ========== */
 .spell-library-container {
   display: flex;
   flex-direction: column;
   height: 100vh;
   width: 100%;
   background-color: var(--library-secondary);
   position: relative;
   overflow: hidden;
   background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" fill-opacity="0.02"><path d="M0 0h100v100H0z" fill="none"/><path d="M50 15l3 9h10l-8 6 3 9-8-6-8 6 3-9-8-6h10z" fill="%231e3a8a"/></svg>');
 }

 .spell-library-content {
   display: flex;
   flex: 1;
   overflow: hidden;
   position: relative;
 }

 /* Sidebar toggle button */
 .sidebar-toggle-btn {
   position: absolute;
   top: 50%;
   left: var(--sidebar-width);
   transform: translateY(-50%);
   width: 24px;
   height: 60px;
   background-color: var(--library-primary);
   border: 1px solid var(--library-border-accent);
   border-left: none;
   border-radius: 0 4px 4px 0;
   display: flex;
   align-items: center;
   justify-content: center;
   cursor: pointer;
   z-index: 20;
   box-shadow: 2px 0 8px rgba(0, 0, 0, 0.3);
   transition: all var(--library-transition-normal);
 }

 .sidebar-toggle-btn:hover {
   background-color: var(--library-primary-hover);
   box-shadow: 2px 0 12px rgba(0, 0, 0, 0.4);
 }

 .sidebar-toggle-btn::after {
   content: '◀';
   color: white;
   font-size: 12px;
   text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
 }

 .sidebar-hidden .sidebar-toggle-btn {
   left: 0;
 }

 .sidebar-hidden .sidebar-toggle-btn::after {
   content: '▶';
 }

 .spell-library-sidebar {
   width: var(--sidebar-width);
   background-color: var(--library-secondary);
   border-right: 1px solid var(--library-border-light);
   overflow-y: auto;
   transition: transform var(--library-transition-normal), width var(--library-transition-normal);
   z-index: 10;
   box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
 }

 .sidebar-hidden .spell-library-sidebar {
   transform: translateX(-100%);
   width: 0;
 }

 .spell-library-sidebar::before {
   content: '';
   position: absolute;
   top: 0;
   right: 0;
   width: 1px;
   height: 100%;
   background: linear-gradient(to bottom,
     var(--library-border-accent),
     transparent 15%,
     transparent 85%,
     var(--library-border-accent)
   );
   opacity: 0.5;
   pointer-events: none;
 }

 .spell-library-spells {
   flex: 1;
   padding: 1.5rem;
   overflow-y: auto;
   background-color: var(--library-tertiary);
   position: relative;
   background-image: linear-gradient(rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.95)),
     url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64" fill-opacity="0.03"><path d="M0 0h64v64H0z" fill="none"/><path d="M32 8l2 6h6l-5 4 2 6-5-4-5 4 2-6-5-4h6z" fill="%231e3a8a"/></svg>');
   transition: padding-left var(--library-transition-normal);
 }

 .sidebar-hidden .spell-library-spells {
   padding-left: 2.5rem;
 }

 /* ========== VIEW MODES ========== */
 /* Grid view */
 .spell-library-spells.grid-view .spell-cards-container {
   display: grid;
   grid-template-columns: repeat(2, 1fr);
   gap: 1rem;
   animation: slideInRight 0.3s ease-out;
   padding: 0.5rem;
 }

 /* Add a direct edit button to each card in the grid view */
 .spell-library-spells.grid-view .spell-card-wrapper::after {
   content: 'EDIT';
   position: absolute;
   top: 0;
   right: 0;
   background-color: #f8b700;
   color: #000000;
   font-weight: bold;
   padding: 5px 10px;
   border-radius: 0 0 0 8px;
   z-index: 9999;
   font-family: 'Cinzel', serif;
   font-size: 12px;
   border: 2px solid #ffffff;
   box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
   cursor: pointer;
   pointer-events: auto;
 }

 /* Add a hover effect to the spell cards */
 .spell-card-wrapper {
   transition: transform 0.2s ease, box-shadow 0.2s ease;
 }

 .spell-card-wrapper:hover {
   transform: translateY(-5px);
   box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
   z-index: 10;
 }

 /* Consolidated spell card wrapper styling */
 .spell-card-wrapper {
   position: relative !important; /* Force relative positioning */
   cursor: pointer;
   transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
   border-radius: 8px;
   overflow: visible !important; /* Allow elements to overflow */
   background-color: transparent;
   border: none;
   height: 100%;
   display: flex;
   justify-content: center;
   margin-bottom: 20px; /* Add space between cards */
 }

 .spell-card-wrapper:hover {
   transform: translateY(-3px);
 }

 /* Show edit overlay on hover */
 .spell-card-wrapper:hover .edit-overlay {
   opacity: 1 !important;
 }

 .spell-card-wrapper.selected {
   transform: translateY(-3px);
 }

 /* Match the review step styling */
 .review-spell-preview {
   width: 100%;
   height: 100%;
   overflow: hidden;
   display: flex;
   justify-content: center;
   align-items: center;
   background-color: transparent;
   border: none;
   box-shadow: none;
   padding: 0;
   margin: 0;
   position: relative;
 }

 /* Add a subtle glow effect to the spell card on hover */
 .spell-card-wrapper:hover .review-spell-preview::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: radial-gradient(circle at center, rgba(30, 58, 138, 0.1), transparent 70%);
   pointer-events: none;
   opacity: 0.8;
   z-index: 1;
 }

 /* Consolidated wow-spell-card styling for library and review step */
 .spell-card-wrapper .wow-spell-card {
   margin: 0;
   width: 100%;
   max-width: 100%;
   height: 100%;
   box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
   border: 2px solid var(--library-border-light);
   background-color: rgba(15, 23, 42, 0.95);
   border-radius: 6px;
   overflow: hidden;
   position: relative;
   display: flex;
   flex-direction: column;
   z-index: 2;
   color: #fff;
   transition: all 0.2s ease;
 }

 /* Ensure the spell card content takes up the full height */
 .spell-card-wrapper .wow-spell-card > div {
   flex: 1;
   display: flex;
   flex-direction: column;
 }

 /* Ensure the spell card content area grows to fill available space */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-content {
   flex: 1;
   overflow-y: auto;
   scrollbar-width: thin;
   scrollbar-color: rgba(100, 116, 139, 0.3) rgba(15, 23, 42, 0.5);
 }

 /* Ensure consistent scrollbar styling */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-content::-webkit-scrollbar {
   width: 6px;
 }

 .spell-card-wrapper .wow-spell-card .wow-spell-card-content::-webkit-scrollbar-track {
   background: rgba(15, 23, 42, 0.5);
 }

 .spell-card-wrapper .wow-spell-card .wow-spell-card-content::-webkit-scrollbar-thumb {
   background-color: rgba(100, 116, 139, 0.3);
   border-radius: 3px;
 }

 /* Add a subtle glow effect to the spell card */
 .spell-card-wrapper .wow-spell-card::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   height: 1px;
   background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
   pointer-events: none;
 }

 /* Ensure the spell card header is properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-header {
   background: linear-gradient(to bottom, rgba(30, 58, 138, 0.4), rgba(10, 15, 30, 0.95));
   border-bottom: 1px solid rgba(66, 91, 158, 0.5);
   padding: 12px;
   display: flex;
   flex-direction: column;
   gap: 6px;
   position: relative;
 }

 /* Add a subtle glow to the header */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-header::after {
   content: '';
   position: absolute;
   bottom: 0;
   left: 0;
   right: 0;
   height: 1px;
   background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
   pointer-events: none;
 }

 /* Ensure the spell card title is properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-title {
   display: flex;
   align-items: center;
   gap: 12px;
 }

 /* Ensure the spell card icon is properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-icon {
   width: 48px;
   height: 48px;
   border-radius: 4px;
   overflow: hidden;
   border: 2px solid rgba(66, 91, 158, 0.7);
   box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4), inset 0 0 3px rgba(255, 255, 255, 0.2);
   position: relative;
 }

 /* Add a subtle glow to the icon on hover */
 .spell-card-wrapper:hover .wow-spell-card .wow-spell-card-icon {
   border-color: rgba(66, 91, 158, 0.9);
   box-shadow: 0 2px 8px rgba(30, 58, 138, 0.5), inset 0 0 5px rgba(255, 255, 255, 0.3);
 }

 /* Add hover effect to the spell card */
 .spell-card-wrapper:hover .wow-spell-card {
   border-color: var(--library-primary);
   box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4), 0 0 10px rgba(30, 58, 138, 0.2);
 }

 /* Edit button container */
.edit-button-container {
  position: absolute !important;
  top: 0 !important;
  right: 0 !important;
  z-index: 9999999 !important; /* Extremely high z-index to ensure visibility */
  pointer-events: all !important; /* Use 'all' instead of 'auto' for better cross-browser support */
}

/* Edit spell button */
.edit-spell-button,
.edit-button-container button {
  background-color: #f8b700 !important; /* WoW gold color for high visibility */
  color: #000000 !important;
  border: 1px solid #ffffff !important;
  border-radius: 0 0 0 4px !important; /* Rounded only on bottom-left corner */
  padding: 4px 8px !important;
  font-size: 10px !important;
  font-weight: bold !important;
  cursor: pointer !important;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.8) !important;
  transition: all 0.2s ease !important;
  font-family: 'Cinzel', serif !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
  opacity: 1 !important; /* Fully opaque by default */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  pointer-events: all !important; /* Use 'all' instead of 'auto' for better cross-browser support */
}

.edit-spell-button:hover,
.edit-button-container button:hover {
  background-color: #ffcc00 !important;
  border-color: #ffffff !important;
  box-shadow: 0 0 15px rgba(248, 183, 0, 0.8) !important;
  transform: scale(1.05) !important; /* Slightly larger on hover */
}

/* Make edit button more visible on card hover */
.spell-card-wrapper:hover .edit-spell-button,
.spell-card-wrapper:hover .edit-button-container button {
  opacity: 1 !important;
  box-shadow: 0 0 15px rgba(248, 183, 0, 0.8) !important;
}

/* Center edit button that appears on hover */
.center-edit-button {
  opacity: 0 !important;
  pointer-events: all !important; /* Use 'all' instead of 'auto' for better cross-browser support */
  z-index: 9999999 !important;
}

.spell-card-wrapper:hover .center-edit-button {
  opacity: 1 !important;
}

/* Make the spell card preview non-interactive to allow clicks to pass through to the edit button */
.review-spell-preview {
  pointer-events: none !important;
}

/* But make the spell card content interactive again */
.review-spell-preview * {
  pointer-events: none !important;
}

/* Add a pseudo-element to the spell card wrapper to make it clickable */
.spell-card-wrapper::after {
  content: 'EDIT';
  position: absolute;
  top: 0;
  right: 0;
  width: 60px;
  height: 40px;
  z-index: 9999998;
  pointer-events: all;
  cursor: pointer;
  background-color: #f8b700;
  color: #000000;
  font-weight: bold;
  padding: 8px 12px;
  border-radius: 0 0 0 8px;
  font-family: 'Cinzel', serif;
  font-size: 14px;
  border: 2px solid #ffffff;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Add a class to make the edit button more visible */
.spell-card-wrapper.has-edit-button {
  position: relative;
}

.spell-card-wrapper.has-edit-button::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 60px;
  height: 40px;
  background-color: transparent;
  z-index: 9999997;
  pointer-events: all;
}



 /* Screen reader only text */
 .sr-only {
   position: absolute;
   width: 1px;
   height: 1px;
   padding: 0;
   margin: -1px;
   overflow: hidden;
   clip: rect(0, 0, 0, 0);
   white-space: nowrap;
   border-width: 0;
 }

 /* Ensure the spell card name is properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-name h3 {
   font-size: 16px;
   font-weight: 700;
   color: #ffd100;
   margin: 0;
   text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
   letter-spacing: 0.5px;
   font-family: 'Cinzel', serif;
 }

 /* Ensure the spell card meta information is properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-meta {
   display: flex;
   font-size: 11px;
   color: #cbd5e1;
   align-items: center;
   gap: 8px;
 }

 /* Style resource icons in the header */
 .spell-card-wrapper .wow-spell-card .spell-resource-icon {
   display: inline-flex;
   align-items: center;
   justify-content: center;
   width: 18px;
   height: 18px;
   border-radius: 3px;
   background-color: rgba(15, 23, 42, 0.7);
   border: 1px solid rgba(100, 116, 139, 0.3);
   margin-right: 2px;
   box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
 }

 /* Ensure the spell card content is properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-content {
   padding: 12px;
   display: flex;
   flex-direction: column;
   gap: 10px;
   background-color: rgba(15, 23, 42, 0.7);
 }

 /* Ensure the spell card description is properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-description {
   font-size: 12px;
   color: #e2e8f0;
   line-height: 1.5;
   margin-bottom: 10px;
   padding: 8px;
   background-color: rgba(15, 23, 42, 0.5);
   border-radius: 4px;
   border: 1px solid rgba(51, 65, 85, 0.3);
 }

 /* Ensure the spell card tags are properly styled */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-tags {
   display: flex;
   flex-wrap: wrap;
   gap: 5px;
   margin-top: 6px;
 }

 /* Style the spell card footer */
 .spell-card-wrapper .wow-spell-card .wow-spell-card-footer {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 8px 12px;
   background: linear-gradient(to top, rgba(30, 58, 138, 0.3), rgba(10, 15, 30, 0.8));
   border-top: 1px solid rgba(51, 65, 85, 0.5);
 }

 /* Style damage and healing sections */
 .spell-card-wrapper .wow-spell-card .wow-spell-damage-section,
 .spell-card-wrapper .wow-spell-card .wow-spell-healing-section {
   background-color: rgba(15, 23, 42, 0.5);
   border: 1px solid rgba(51, 65, 85, 0.4);
   border-radius: 4px;
   padding: 8px;
   margin-bottom: 8px;
 }

 /* Style damage type text */
 .spell-card-wrapper .wow-spell-card .damage-type {
   font-weight: 600;
   text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
 }

 /* Style damage formula */
 .spell-card-wrapper .wow-spell-card .damage-formula {
   font-family: monospace;
   background-color: rgba(0, 0, 0, 0.2);
   padding: 2px 4px;
   border-radius: 3px;
   margin-left: 4px;
 }

 .spell-card-wrapper .wow-spell-card .wow-spell-card-tag {
   background-color: rgba(30, 41, 59, 0.7);
   border: 1px solid rgba(100, 116, 139, 0.3);
   border-radius: 4px;
   padding: 2px 6px;
   font-size: 11px;
   color: #cbd5e1;
 }

 /* List view */
 .spell-library-spells.list-view .spell-cards-container {
   display: flex;
   flex-direction: column;
   gap: 0.75rem;
   animation: slideInRight 0.3s ease-out;
   padding: 0.5rem;
 }

 /* Count info */
 .spell-count-info {
   margin-bottom: 1rem;
   color: var(--library-text-muted);
   font-size: 0.9rem;
   text-align: right;
   text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
 }

 /* ========== TOOLBAR AND ACTIONS ========== */
 .spell-library-toolbar {
   height: var(--header-height);
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: 0 1.5rem;
   background-color: var(--library-secondary);
   border-bottom: 1px solid var(--library-border-light);
   box-shadow: var(--library-shadow-sm);
   z-index: 20;
   position: relative;
   background-image: linear-gradient(to bottom,
     var(--library-secondary),
     rgba(30, 41, 59, 0.95)
   );
 }

 .spell-library-toolbar::after {
   content: '';
   position: absolute;
   bottom: 0;
   left: 0;
   right: 0;
   height: 1px;
   background: linear-gradient(to right,
     transparent,
     var(--library-border-accent),
     transparent
   );
   opacity: 0.7;
 }

 .spell-library-actions {
   display: flex;
   gap: 0.75rem;
 }

 .spell-library-view-options {
   display: flex;
   gap: 0.5rem;
 }

 .view-toggle-button, .filter-toggle-button {
   width: 36px;
   height: 36px;
   display: flex;
   align-items: center;
   justify-content: center;
   background-color: var(--library-tertiary);
   border: 1px solid var(--library-border-light);
   border-radius: 3px;
   color: var(--library-text-muted);
   position: relative;
   box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
 }

 .view-toggle-button:hover, .filter-toggle-button:hover {
   background-color: var(--library-secondary);
   color: var(--library-text-light);
   border-color: var(--library-primary-hover);
   box-shadow: 0 0 5px rgba(30, 58, 138, 0.3);
 }

 .view-toggle-button.active {
   background-color: var(--library-primary);
   color: white;
   border-color: rgba(255, 255, 255, 0.2);
   box-shadow: 0 0 5px var(--library-primary-glow);
 }

 .filter-badge {
   position: absolute;
   top: -5px;
   right: -5px;
   background-color: var(--library-primary-hover);
   color: white;
   font-size: 0.7rem;
   font-weight: 600;
   width: 18px;
   height: 18px;
   display: flex;
   align-items: center;
   justify-content: center;
   border-radius: 50%;
   box-shadow: var(--library-shadow-sm);
 }

 .mobile-filter-toggle {
   display: none;
   position: fixed;
   bottom: 1.5rem;
   right: 1.5rem;
   width: 56px;
   height: 56px;
   border-radius: 50%;
   background-color: var(--library-primary);
   color: white;
   align-items: center;
   justify-content: center;
   box-shadow: var(--library-shadow-md), 0 0 15px var(--library-primary-glow);
   z-index: 30;
   font-size: 1.2rem;
   border: 1px solid rgba(255, 255, 255, 0.15);
 }

 .mobile-filter-toggle:hover {
   background-color: var(--library-primary-hover);
   transform: translateY(-2px);
   box-shadow: var(--library-shadow-lg), 0 0 20px var(--library-primary-glow);
 }

 /* ========== FILTER SIDEBAR ========== */
 .library-filters {
   padding: 1.5rem;
   display: flex;
   flex-direction: column;
   gap: 1.5rem;
 }

 .library-filters-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 1rem;
   border-bottom: 1px solid rgba(51, 65, 85, 0.5);
   padding-bottom: 0.5rem;
 }

 .library-filters-header h3 {
   font-size: 1.3rem;
   color: var(--library-text-light);
   text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
   margin: 0;
 }

 .clear-filters-btn {
   color: var(--library-primary-hover);
   font-size: 0.8rem;
   padding: 0.25rem 0.5rem;
   background-color: rgba(30, 58, 138, 0.1);
   border-radius: 3px;
   border: 1px solid rgba(30, 58, 138, 0.2);
   transition: all 0.2s ease;
 }

 .clear-filters-btn:hover {
   background-color: rgba(30, 58, 138, 0.2);
   color: white;
   border-color: var(--library-primary-hover);
 }

 /* ========== FILTER PRESETS ========== */
 .filter-presets {
   margin-bottom: 1rem;
   border: 1px solid var(--library-border-light);
   border-radius: 4px;
   padding: 0.75rem;
   background-color: rgba(15, 23, 42, 0.5);
   box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
 }

 .filter-presets-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 0.75rem;
   padding-bottom: 0.5rem;
   border-bottom: 1px solid rgba(51, 65, 85, 0.5);
 }

 .filter-presets-header h4 {
   margin: 0;
   font-size: 1rem;
   color: var(--library-text-light);
 }

 .add-preset-btn {
   width: 24px;
   height: 24px;
   display: flex;
   align-items: center;
   justify-content: center;
   background-color: rgba(30, 58, 138, 0.1);
   border-radius: 3px;
   color: var(--library-primary-hover);
   border: 1px solid rgba(30, 58, 138, 0.2);
   transition: all 0.2s ease;
 }

 .add-preset-btn:hover {
   background-color: rgba(30, 58, 138, 0.2);
   color: white;
   border-color: var(--library-primary-hover);
 }

 .new-preset-input {
   display: flex;
   gap: 0.5rem;
   margin-bottom: 0.75rem;
 }

 .new-preset-input input {
   flex: 1;
   background-color: var(--library-quaternary);
   border-color: var(--library-border-light);
 }

 .save-preset-btn {
   background-color: var(--library-primary);
   color: white;
   padding: 0.25rem 0.5rem;
   border-radius: 3px;
   font-size: 0.8rem;
   border: 1px solid rgba(255, 255, 255, 0.1);
   box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
 }

 .save-preset-btn:hover {
   background-color: var(--library-primary-hover);
 }

 .save-preset-btn:disabled {
   background-color: var(--library-border-light);
   color: var(--library-text-muted);
   cursor: not-allowed;
   box-shadow: none;
 }

 .preset-list {
   display: flex;
   flex-direction: column;
   gap: 0.5rem;
   max-height: 150px;
   overflow-y: auto;
 }

 .preset-item {
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: 0.5rem 0.75rem;
   background-color: rgba(30, 58, 138, 0.1);
   border-radius: 3px;
   cursor: pointer;
   border: 1px solid rgba(30, 58, 138, 0.2);
   transition: all 0.2s ease;
 }

 .preset-item:hover {
   background-color: rgba(30, 58, 138, 0.2);
   transform: translateY(-1px);
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
   border-color: var(--library-primary-hover);
 }

 .preset-name {
   font-size: 0.9rem;
   color: var(--library-text-light);
 }

 .delete-preset-btn {
   color: var(--library-text-muted);
   width: 22px;
   height: 22px;
   display: flex;
   align-items: center;
   justify-content: center;
   font-size: 0.8rem;
   background-color: rgba(0, 0, 0, 0.2);
   border-radius: 50%;
   transition: all 0.2s ease;
 }

 .delete-preset-btn:hover {
   color: white;
   background-color: var(--library-danger);
 }

 /* ========== FILTER SEARCH ========== */
 .filter-search {
   position: relative;
   margin-bottom: 1rem;
 }

 .filter-search input {
   width: 100%;
   padding: 0.6rem 2rem 0.6rem 0.75rem;
   background-color: var(--library-quaternary);
   border: 1px solid var(--library-border-light);
   height: 38px;
   border-radius: 4px;
   box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
   transition: all 0.2s ease;
 }

 .filter-search input:focus {
   border-color: var(--library-primary-hover);
   box-shadow: 0 0 5px var(--library-primary-glow), inset 0 1px 3px rgba(0, 0, 0, 0.2);
 }

 .filter-search input::placeholder {
   color: var(--library-text-muted);
   opacity: 0.7;
 }

 .clear-search-btn {
   position: absolute;
   right: 0.5rem;
   top: 50%;
   transform: translateY(-50%);
   color: var(--library-text-muted);
   width: 24px;
   height: 24px;
   display: flex;
   align-items: center;
   justify-content: center;
   border-radius: 50%;
   transition: all 0.15s ease;
 }

 .clear-search-btn:hover {
   color: var(--library-text-light);
   background-color: rgba(255, 255, 255, 0.1);
 }

 /* ========== FILTER SECTIONS ========== */
 .filter-section {
   margin-bottom: 1rem;
   border-bottom: 1px solid var(--library-border-light);
   padding-bottom: 1rem;
   transition: max-height var(--library-transition-normal);
 }

 .filter-section:last-child {
   border-bottom: none;
   margin-bottom: 0;
   padding-bottom: 0;
 }

 .filter-section.collapsed .filter-section-content {
   display: none;
 }

 .filter-section-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   cursor: pointer;
   padding: 0.5rem 0;
   transition: all 0.2s ease;
 }

 .filter-section-header:hover {
   color: var(--library-primary-hover);
 }

 .filter-section-header h4 {
   font-size: 1rem;
   margin: 0;
   transition: color 0.2s ease;
 }

 .filter-section-header:hover h4 {
   color: var(--library-primary-hover);
 }

 .filter-section-content {
   margin-top: 0.5rem;
   display: flex;
   flex-direction: column;
   gap: 0.5rem;
   animation: fadeIn 0.2s ease-out;
 }

 /* ========== FILTER OPTIONS ========== */
 .filter-checkbox {
   display: flex;
   align-items: center;
   gap: 0.5rem;
   padding: 0.375rem 0.5rem;
   cursor: pointer;
   border-radius: 3px;
   transition: background-color 0.15s ease;
 }

 .filter-checkbox:hover {
   background-color: rgba(30, 58, 138, 0.1);
 }

 .filter-checkbox input[type="checkbox"] {
   appearance: none;
   width: 16px;
   height: 16px;
   border: 1px solid var(--library-border-light);
   border-radius: 3px;
   background-color: var(--library-quaternary);
   cursor: pointer;
   position: relative;
   box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
 }

 .filter-checkbox input[type="checkbox"]:checked {
   background-color: var(--library-primary);
   border-color: var(--library-primary);
 }

 .filter-checkbox input[type="checkbox"]:checked::after {
   content: '✓';
   position: absolute;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   color: white;
   font-size: 0.7rem;
   text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
 }

 .category-color {
   width: 16px;
   height: 16px;
   border-radius: 3px;
   display: inline-block;
   box-shadow: inset 0 0 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
   border: 1px solid rgba(255, 255, 255, 0.1);
 }

 .category-name, .type-name, .effect-name {
   flex: 1;
   font-size: 0.9rem;
 }

 .category-count, .type-count {
   font-size: 0.8rem;
   color: var(--library-text-muted);
   background-color: rgba(0, 0, 0, 0.2);
   padding: 0.1rem 0.4rem;
   border-radius: 10px;
   min-width: 22px;
   text-align: center;
 }

 /* ========== LEVEL RANGE ========== */
 .level-range {
   display: flex;
   flex-wrap: wrap;
   gap: 0.375rem;
 }

 .level-btn {
   width: 32px;
   height: 32px;
   display: flex;
   align-items: center;
   justify-content: center;
   background-color: var(--library-quaternary);
   border: 1px solid var(--library-border-light);
   border-radius: 4px;
   font-size: 0.9rem;
   transition: all 0.2s ease;
   box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
 }

 .level-btn:hover {
   background-color: var(--library-secondary);
   border-color: var(--library-primary-hover);
   box-shadow: 0 0 5px rgba(30, 58, 138, 0.3);
   transform: translateY(-1px);
 }

 .level-btn.selected {
   background-color: var(--library-primary);
   color: white;
   border-color: rgba(255, 255, 255, 0.2);
   box-shadow: 0 0 5px var(--library-primary-glow);
   text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
   font-weight: 600;
 }

 /* ========== EFFECT ICONS ========== */
 .effect-icon {
   width: 16px;
   height: 16px;
   display: flex;
   align-items: center;
   justify-content: center;
   border-radius: 50%;
   font-size: 0.65rem;
   background-color: var(--library-quaternary);
   box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(255, 255, 255, 0.05);
   border: 1px solid rgba(255, 255, 255, 0.05);
 }

 .effect-icon.damage { color: var(--library-damage); }
 .effect-icon.healing { color: var(--library-healing); }
 .effect-icon.buff { color: var(--library-buff); }
 .effect-icon.debuff { color: var(--library-debuff); }
 .effect-icon.utility { color: var(--library-utility); }
 .effect-icon.control { color: var(--library-control); }
 .effect-icon.summoning { color: var(--library-summoning); }
 .effect-icon.transformation { color: var(--library-transformation); }

 /* ========== SORT OPTIONS ========== */
 .sort-options {
   margin-top: 1rem;
   border: 1px solid var(--library-border-light);
   border-radius: 4px;
   padding: 0.75rem;
   background-color: rgba(15, 23, 42, 0.5);
   box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
 }

 .sort-options h4 {
   margin: 0 0 0.75rem 0;
   font-size: 1rem;
   padding-bottom: 0.5rem;
   border-bottom: 1px solid rgba(51, 65, 85, 0.5);
 }

 .sort-buttons {
   display: flex;
   flex-direction: column;
   gap: 0.5rem;
 }

 .sort-btn {
   text-align: left;
   padding: 0.5rem 0.75rem;
   background-color: var(--library-quaternary);
   border: 1px solid var(--library-border-light);
   border-radius: 3px;
   display: flex;
   justify-content: space-between;
   align-items: center;
   transition: all 0.2s ease;
   box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
 }

 .sort-btn:hover {
   background-color: rgba(30, 58, 138, 0.1);
   border-color: var(--library-primary-hover);
   transform: translateY(-1px);
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
 }

 .sort-btn.active {
   background-color: var(--library-primary);
   color: white;
   border-color: rgba(255, 255, 255, 0.2);
   text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
   box-shadow: 0 0 5px var(--library-primary-glow);
 }

 /* ========== EMPTY AND LOADING STATES ========== */
 .spell-library-empty {
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
   height: 100%;
   padding: 2rem;
   text-align: center;
   background-image: radial-gradient(circle at center, rgba(30, 58, 138, 0.1) 0%, transparent 70%);
 }

 .spell-library-empty-icon {
   font-size: 4rem;
   color: var(--library-primary-hover);
   margin-bottom: 1.5rem;
   opacity: 0.6;
   animation: pulse 3s infinite ease-in-out;
   text-shadow: 0 0 20px var(--library-primary-glow);
 }

 @keyframes pulse {
   0% { transform: scale(1); opacity: 0.6; }
   50% { transform: scale(1.05); opacity: 0.8; }
   100% { transform: scale(1); opacity: 0.6; }
 }

 .spell-library-empty h2 {
   margin-bottom: 0.5rem;
   font-size: 1.8rem;
   background-image: linear-gradient(135deg, #bfdbfe, #60a5fa);
   -webkit-background-clip: text;
   -webkit-text-fill-color: transparent;
   text-shadow: none;
 }

 .spell-library-empty p {
   margin-bottom: 2rem;
   color: var(--library-text-muted);
   font-size: 1.1rem;
 }

 .spell-library-no-results {
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
   height: 250px;
   text-align: center;
   background-image: radial-gradient(circle at center, rgba(30, 58, 138, 0.05) 0%, transparent 70%);
   border-radius: 8px;
   border: 1px dashed var(--library-border-light);
 }

 .spell-library-no-results p {
   color: var(--library-text-muted);
   margin-bottom: 1.5rem;
   font-size: 1.1rem;
 }

 .spell-library-loading {
   display: flex;
   justify-content: center;
   align-items: center;
   height: 100%;
 }

 .loading-spinner {
   width: 50px;
   height: 50px;
   border: 4px solid rgba(30, 58, 138, 0.3);
   border-top: 4px solid var(--library-primary-hover);
   border-radius: 50%;
   animation: spin 1s linear infinite;
   box-shadow: 0 0 15px var(--library-primary-glow);
 }

 @keyframes spin {
   0% { transform: rotate(0deg); }
   100% { transform: rotate(360deg); }
 }

 /* ========== ANIMATIONS AND TRANSITIONS ========== */
 @keyframes fadeIn {
   from { opacity: 0; }
   to { opacity: 1; }
 }

 @keyframes slideInRight {
   from { transform: translateX(20px); opacity: 0; }
   to { transform: translateX(0); opacity: 1; }
 }

 @keyframes glow {
   0% { box-shadow: 0 0 5px var(--library-primary-glow); }
   50% { box-shadow: 0 0 15px var(--library-primary-glow), 0 0 5px var(--library-primary-glow) inset; }
   100% { box-shadow: 0 0 5px var(--library-primary-glow); }
 }

 .spell-card {
   animation: fadeIn 0.3s ease-out;
   transform-origin: center;
 }

 .primary-button {
   animation: glow 3s infinite;
 }

 @keyframes borderGlow {
   0% { opacity: 0.6; }
   100% { opacity: 1; }
 }

 /* ========== RESPONSIVE LAYOUTS ========== */
 /* Large screens */
 @media (min-width: 1600px) {
   .spell-library-spells.grid-view .spell-cards-container {
     grid-template-columns: repeat(3, 1fr);
     gap: 1.5rem;
     padding: 1rem;
   }
 }

 /* Tablet */
 @media (max-width: 1200px) {
   :root {
     --sidebar-width: 260px;
   }

   .spell-library-toolbar {
     padding: 0 1rem;
   }

   .spell-library-spells {
     padding: 1rem;
   }

   .spell-library-spells.grid-view .spell-cards-container {
     grid-template-columns: repeat(2, 1fr);
     gap: 1rem;
   }

   .spell-library-actions {
     gap: 0.5rem;
   }

   .primary-button, .secondary-button {
     padding: 0.5rem 0.75rem;
     font-size: 0.9rem;
   }
 }

 /* Small tablet */
 @media (max-width: 992px) {
   :root {
     --sidebar-width: 240px;
   }

   .spell-library-spells.grid-view .spell-cards-container {
     grid-template-columns: repeat(2, 1fr);
     gap: 1rem;
   }
 }

 /* Mobile */
 @media (max-width: 768px) {
   :root {
     --sidebar-width: 100%;
     --header-height: 50px;
   }

   .spell-library-sidebar {
     position: fixed;
     top: var(--header-height);
     left: 0;
     height: calc(100vh - var(--header-height));
     transform: translateX(-100%);
     box-shadow: var(--library-shadow-lg);
     z-index: 100;
   }

   .spell-library-sidebar.visible {
     transform: translateX(0);
   }

   .spell-library-toolbar {
     padding: 0 0.75rem;
   }

   .spell-library-actions {
     gap: 0.375rem;
   }

   .primary-button, .secondary-button {
     padding: 0.375rem 0.5rem;
     font-size: 0.8rem;
   }

   .primary-button span, .secondary-button span {
     display: none;
   }

   .mobile-filter-toggle {
     display: flex;
   }

   .filter-toggle-button {
     display: none;
   }

   .spell-library-spells {
     padding: 0.75rem;
   }

   .spell-library-spells.grid-view .spell-cards-container {
     grid-template-columns: repeat(1, 1fr);
     gap: 0.75rem;
   }

   /* Improve card display on mobile */
   .spell-card-wrapper {
     height: auto;
     min-height: 300px;
   }

   .spell-card-wrapper .wow-spell-card {
     height: 100%;
   }
 }

 /* Small mobile */
 @media (max-width: 480px) {
   .spell-library-spells.grid-view .spell-cards-container {
     grid-template-columns: 1fr;
     gap: 0.75rem;
   }

   .list-view .spell-card-wrapper {
     height: auto;
   }

   .list-view .wow-spell-card {
     max-width: 100%;
     flex-direction: column;
   }

   .grid-view .spell-card-wrapper {
     width: 100%;
     margin-bottom: 0.5rem;
   }

   .grid-view .wow-spell-card {
     max-width: 100%;
   }

   .filter-section-header {
     font-size: 0.9rem;
   }

   /* Ensure spell cards are properly sized on very small screens */
   .spell-card-wrapper {
     min-height: 350px;
   }
 }

 /* ========== TABS SYSTEM ========== */
 .spellbook-tabs {
   display: flex;
   border-bottom: 1px solid var(--library-border-light);
   margin-bottom: 1rem;
   overflow-x: auto;
   scrollbar-width: thin;
   position: relative;
 }

 .spellbook-tabs::after {
   content: '';
   position: absolute;
   bottom: 0;
   left: 0;
   right: 0;
   height: 1px;
   background: linear-gradient(to right,
     transparent,
     var(--library-border-accent),
     transparent
   );
   opacity: 0.7;
 }

 .tab-button {
   padding: 0.75rem 1.25rem;
   color: var(--library-text-muted);
   font-weight: 600;
   transition: all var(--library-transition-normal);
   white-space: nowrap;
   position: relative;
   font-family: 'Cinzel', serif;
   letter-spacing: 0.5px;
 }

 .tab-button:hover {
   color: var(--library-text-light);
   background-color: rgba(30, 58, 138, 0.1);
 }

 .tab-button.active {
   color: var(--library-primary-hover);
 }

 .tab-button.active::after {
   content: '';
   position: absolute;
   bottom: -1px;
   left: 0;
   right: 0;
   height: 3px;
   background-color: var(--library-primary-hover);
   z-index: 1;
   box-shadow: 0 0 8px var(--library-primary-glow);
 }

 /* Tab content container */
 .tab-content {
   display: none;
   animation: fadeIn var(--library-transition-normal);
 }

 .tab-content.active {
   display: block;
 }

 /* ========== ENHANCED STYLING ========== */
 /* Arcane particle effects */
 .spell-library-spells::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background-image:
     radial-gradient(circle at 20% 30%, rgba(30, 58, 138, 0.05) 0%, transparent 30%),
     radial-gradient(circle at 80% 70%, rgba(30, 58, 138, 0.05) 0%, transparent 30%);
   pointer-events: none;
 }

 /* Animated glow borders on hover */
 .spell-card.legendary:hover {
   animation: borderPulse 2s infinite;
 }

 @keyframes borderPulse {
   0% { border-color: var(--card-legendary); }
   50% { border-color: #2563eb; }
   100% { border-color: var(--card-legendary); }
 }

 /* Enhanced icon container */
 .filter-checkbox:hover .effect-icon {
   transform: scale(1.1);
   box-shadow: 0 0 5px var(--library-primary-glow);
 }

 /* Refined font rendering */
 body {
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
   text-rendering: optimizeLegibility;
 }

 /* ========== WOW WINDOW & SPELLBOOK STYLES ========== */

 /* WowWindow Styling */
 .wow-window {
   background-color: var(--library-tertiary);
   border: 2px solid var(--library-border-dark);
   border-radius: 8px;
   box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7), 0 0 0 1px var(--library-border-accent);
   overflow: hidden;
   position: relative;
   display: flex;
   flex-direction: column;
   height: 100%;
   width: 100%;
 }

 .wow-window::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background-image:
     url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" fill-opacity="0.02"><path d="M0 0h100v100H0z" fill="none"/><path d="M50 20l4 12h12l-10 7 4 12-10-7-10 7 4-12-10-7h12z" fill="%231e3a8a"/></svg>');
   pointer-events: none;
   opacity: 0.4;
   z-index: 0;
 }

 .wow-window-titlebar {
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: 0.75rem 1rem;
   background: linear-gradient(to bottom, var(--library-primary), #172554);
   border-bottom: 1px solid var(--library-border-accent);
   color: var(--library-text-bright);
   font-family: 'Cinzel', serif;
   user-select: none;
   position: relative;
   z-index: 1;
   box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
 }

 .wow-window-titlebar::after {
   content: '';
   position: absolute;
   bottom: 0;
   left: 0;
   right: 0;
   height: 1px;
   background: linear-gradient(to right, transparent, var(--library-text-bright), transparent);
   opacity: 0.3;
 }

 .wow-window-title {
   font-size: 1.4rem;
   font-weight: 700;
   letter-spacing: 1px;
   margin: 0;
   text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
   display: flex;
   align-items: center;
 }

 .wow-window-title::before {
   content: '';
   display: inline-block;
   width: 24px;
   height: 24px;
   margin-right: 0.75rem;
   background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="rgba(255,255,255,0.9)"><path d="M12 2L9.2 8.6 2 9.2 7 14l-1.2 7L12 17.3 18.2 21 17 14l5-4.8-7.2-.6z"/></svg>');
   background-repeat: no-repeat;
   background-position: center;
   filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
 }

 .wow-window-controls {
   display: flex;
   gap: 0.5rem;
 }

 .wow-window-button {
   width: 24px;
   height: 24px;
   display: flex;
   align-items: center;
   justify-content: center;
   border: 1px solid rgba(255, 255, 255, 0.2);
   border-radius: 3px;
   background-color: rgba(0, 0, 0, 0.2);
   color: var(--library-text-bright);
   cursor: pointer;
   transition: all 0.2s ease;
 }

 .wow-window-button:hover {
   background-color: rgba(255, 255, 255, 0.1);
 }

 .wow-window-content {
   flex: 1;
   overflow: hidden;
   position: relative;
   z-index: 1;
 }

 /* Tab Navigation */
 .spellbook-tab-navigation {
   display: flex;
   background-color: rgba(13, 25, 46, 0.8);
   border-bottom: 1px solid var(--library-border-light);
   position: relative;
   z-index: 10;
 }

 .spellbook-tab {
   padding: 0.75rem 1.5rem;
   font-family: 'Cinzel', serif;
   color: var(--library-text-muted);
   border: none;
   background: none;
   border-bottom: 3px solid transparent;
   cursor: pointer;
   transition: all 0.2s ease;
   font-size: 1rem;
   letter-spacing: 0.5px;
   position: relative;
 }

 .spellbook-tab:hover {
   color: var(--library-text-light);
 }

 .spellbook-tab.active {
   color: var(--library-primary-hover);
   border-bottom-color: var(--library-primary-hover);
 }

 .spellbook-tab.active::after {
   content: '';
   position: absolute;
   bottom: -3px;
   left: 0;
   right: 0;
   height: 3px;
   box-shadow: 0 0 10px var(--library-primary-glow);
   background-color: var(--library-primary-hover);
 }

 /* Spellbook Sections */
 .spellbook-section {
   padding: 2rem;
   height: 100%;
   overflow-y: auto;
 }

 .spellbook-section-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 2rem;
   padding-bottom: 1rem;
   border-bottom: 1px solid var(--library-border-light);
 }

 .spellbook-section-header h2 {
   font-family: 'Cinzel', serif;
   font-size: 1.8rem;
   color: var(--library-text-light);
   margin: 0;
   display: flex;
   align-items: center;
   gap: 0.75rem;
 }

 .spellbook-section-header h2 svg {
   color: var(--library-primary-hover);
 }

 .spellbook-section-actions {
   display: flex;
   gap: 1rem;
 }

 /* Search Bar */
 .spellbook-search {
   position: relative;
   width: 300px;
 }

 .spellbook-search-input {
   width: 100%;
   padding: 0.75rem 0.75rem 0.75rem 2.5rem;
   background-color: rgba(13, 25, 46, 0.6);
   border: 1px solid var(--library-border-light);
   border-radius: 4px;
   color: var(--library-text-light);
   transition: all 0.2s ease;
 }

 .spellbook-search-input:focus {
   outline: none;
   border-color: var(--library-primary-hover);
   box-shadow: 0 0 0 1px var(--library-primary-glow);
 }

 .spellbook-search-icon {
   position: absolute;
   left: 0.75rem;
   top: 50%;
   transform: translateY(-50%);
   color: var(--library-text-muted);
 }

 .spellbook-search-clear {
   position: absolute;
   right: 0.75rem;
   top: 50%;
   transform: translateY(-50%);
   color: var(--library-text-muted);
   background: none;
   border: none;
   cursor: pointer;
   font-size: 1.2rem;
   line-height: 1;
   padding: 0;
 }

 /* Filters */
 .spellbook-filters {
   margin-bottom: 2rem;
 }

 .filter-group {
   margin-bottom: 1rem;
 }

 .filter-group-title {
   display: block;
   margin-bottom: 0.5rem;
   font-weight: 600;
   color: var(--library-text-light);
   font-size: 0.9rem;
 }

 .filter-buttons {
   display: flex;
   flex-wrap: wrap;
   gap: 0.5rem;
 }

 .filter-button {
   padding: 0.5rem 1rem;
   background-color: rgba(13, 25, 46, 0.4);
   border: 1px solid var(--library-border-light);
   border-radius: 4px;
   color: var(--library-text-muted);
   cursor: pointer;
   transition: all 0.2s ease;
   font-size: 0.9rem;
 }

 .filter-button:hover {
   background-color: rgba(30, 58, 138, 0.2);
   color: var(--library-text-light);
   border-color: var(--library-primary);
 }

 .filter-button.active {
   background-color: var(--library-primary);
   color: white;
   border-color: var(--library-primary-hover);
 }

 /* Active Filters */
 .spellbook-active-filters {
   display: flex;
   flex-wrap: wrap;
   gap: 0.75rem;
   margin-bottom: 1.5rem;
   padding: 1rem;
   background-color: rgba(13, 25, 46, 0.4);
   border: 1px solid var(--library-border-light);
   border-radius: 4px;
 }

 .filter-tag {
   display: flex;
   align-items: center;
   gap: 0.5rem;
   padding: 0.25rem 0.75rem;
   background-color: var(--library-primary);
   border-radius: 4px;
   color: white;
   font-size: 0.9rem;
 }

 .filter-tag-close {
   background: none;
   border: none;
   color: white;
   cursor: pointer;
   font-size: 1rem;
   line-height: 1;
   padding: 0;
   opacity: 0.7;
 }

 .filter-tag-close:hover {
   opacity: 1;
 }

 .clear-filters {
   margin-left: auto;
   background: none;
   border: none;
   color: var(--library-primary-hover);
   cursor: pointer;
   font-size: 0.9rem;
   text-decoration: underline;
 }

 /* Spells Grid */
 .spellbook-grid {
   display: grid;
   grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
   gap: 1.5rem;
 }

 /* Collection Grid */
 .collections-grid {
   display: grid;
   grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
   gap: 1.25rem;
   padding: 0.5rem;
 }

 /* Collection Card */
 .collection-card {
   background-color: rgba(13, 25, 46, 0.7);
   border: 1px solid var(--collection-color, var(--library-border-light));
   border-radius: 4px;
   overflow: hidden;
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(0, 0, 0, 0.3);
   transition: all 0.3s ease;
   cursor: pointer;
   position: relative;
   height: 80px;
   display: flex;
   flex-direction: column;
 }

 .collection-card:hover {
   transform: translateY(-5px) scale(1.02);
   border-color: var(--collection-color, var(--library-primary-hover));
   box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6),
              0 0 20px var(--collection-glow, rgba(30, 58, 138, 0.4)),
              inset 0 0 20px rgba(0, 0, 0, 0.3);
 }

 .collection-card::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   height: 100%;
   background: linear-gradient(to bottom,
              rgba(var(--collection-color-rgb, 30, 58, 138), 0.15),
              transparent 40%,
              rgba(0, 0, 0, 0.4) 100%);
   z-index: 0;
 }

 .collection-header {
   position: relative;
   z-index: 1;
   display: flex;
   align-items: center;
   gap: 0.3rem;
   padding: 0.25rem 0.4rem;
   border-bottom: 1px solid rgba(255, 255, 255, 0.1);
   background-color: rgba(0, 0, 0, 0.3);
 }



 .collection-card:hover .collection-icon {
   transform: scale(1.05);
   box-shadow: 0 0 8px var(--collection-glow, var(--library-primary-glow));
 }

 .collection-info {
   flex: 1;
 }

 .collection-name {
   margin: 0 0 0.1rem 0;
   font-size: 0.7rem;
   color: var(--collection-color, var(--library-text-light));
   font-family: 'Cinzel', serif;
   text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
   font-weight: 600;
   letter-spacing: 0.3px;
 }

 .collection-count {
   font-size: 0.65rem;
   color: #aaa;
   display: flex;
   align-items: center;
   gap: 4px;
 }

 .spell-count-badge {
   display: inline-flex;
   align-items: center;
   justify-content: center;
   min-width: 14px;
   height: 14px;
   padding: 0 3px;
   border-radius: 7px;
   color: white;
   font-weight: bold;
   font-size: 0.6rem;
   box-shadow: 0 0 4px var(--collection-glow, var(--library-primary-glow));
   text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
 }

 .collection-description {
   padding: 0.3rem 0.5rem;
   flex: 1;
   position: relative;
   z-index: 1;
   display: flex;
   flex-direction: column;
   justify-content: space-between;
 }

 .collection-description p {
   margin: 0;
   color: #ccc;
   font-size: 0.65rem;
   line-height: 1.3;
   display: -webkit-box;
   -webkit-line-clamp: 2;
   -webkit-box-orient: vertical;
   overflow: hidden;
   text-overflow: ellipsis;
   max-height: 2.6em;
 }

 /* Collections Grid */
 .collections-grid {
   display: grid;
   grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
   gap: 0.5rem;
   margin-top: 0.5rem;
   padding: 0.5rem;
   overflow-y: auto;
   max-height: calc(100vh - 180px);
 }

 .collection-title {
   margin: 0;
   font-family: 'Cinzel', serif;
   font-size: 1.4rem;
   color: var(--library-text-light);
   text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
 }

 .collection-description {
   position: relative;
   z-index: 1;
   padding: 0 1.5rem;
   margin-bottom: 1.5rem;
   color: var(--library-text-muted);
   line-height: 1.5;
 }

 .collection-spells {
   padding: 0 1.5rem 1.5rem;
   position: relative;
   z-index: 1;
 }

 .collection-spells-preview {
   display: flex;
   flex-wrap: wrap;
   gap: 0.5rem;
   margin-bottom: 1rem;
 }

 .collection-spell-preview {
   width: 40px;
   height: 40px;
   border-radius: 4px;
   overflow: hidden;
   border: 2px solid var(--library-border-light);
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
   transition: all 0.2s ease;
 }

 .collection-spell-preview:hover {
   transform: scale(1.1);
   border-color: var(--library-primary-hover);
   box-shadow: 0 0 10px var(--library-primary-glow);
 }

 .collection-spell-icon {

   height: 100%;
   object-fit: cover;
 }

 .collection-footer {
   border-top: 1px solid var(--library-border-light);
   padding: 1rem 1.5rem;
   display: flex;
   justify-content: space-between;
   background-color: rgba(0, 0, 0, 0.2);
   position: relative;
   z-index: 1;
 }

 .collection-spell-count {
   color: var(--library-text-muted);
   font-size: 0.9rem;
 }

 .collection-actions {
   display: flex;
   gap: 0.75rem;
 }

 .collection-action-btn {
   background: none;
   border: none;
   color: var(--library-text-muted);
   cursor: pointer;
   transition: all 0.2s ease;
 }

 .collection-action-btn:hover {
   color: var(--library-primary-hover);
 }

 /* Create Collection Form */
 .create-collection-form {
   background-color: rgba(13, 25, 46, 0.6);
   border: 1px solid var(--library-border-light);
   border-radius: 8px;
   padding: 2rem;
   margin-bottom: 2rem;
   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
 }

 .create-collection-form h3 {
   margin-top: 0;
   margin-bottom: 1.5rem;
   color: var(--library-text-light);
   font-family: 'Cinzel', serif;
   font-size: 1.4rem;
   border-bottom: 1px solid var(--library-border-light);
   padding-bottom: 0.75rem;
 }

 .form-group {
   margin-bottom: 1.5rem;
 }

 .form-group label {
   display: block;
   margin-bottom: 0.5rem;
   color: var(--library-text-light);
   font-weight: 600;
 }

 .form-group input,
 .form-group textarea {
   width: 100%;
   padding: 0.75rem;
   background-color: rgba(13, 25, 46, 0.8);
   border: 1px solid var(--library-border-light);
   border-radius: 4px;
   color: var(--library-text-light);
   transition: all 0.2s ease;
 }

 .form-group input:focus,
 .form-group textarea:focus {
   outline: none;
   border-color: var(--library-primary-hover);
   box-shadow: 0 0 0 1px var(--library-primary-glow);
 }

 .form-group textarea {
   min-height: 100px;
   resize: vertical;
 }

 .form-actions {
   display: flex;
   justify-content: flex-end;
   gap: 1rem;
   margin-top: 2rem;
 }

 .form-button {
   padding: 0.75rem 1.5rem;
   border-radius: 4px;
   cursor: pointer;
   transition: all 0.2s ease;
 }

 .form-button.cancel {
   background-color: transparent;
   border: 1px solid var(--library-border-light);
   color: var(--library-text-light);
 }

 .form-button.cancel:hover {
   background-color: rgba(255, 255, 255, 0.05);
 }

 .form-button.submit {
   background-color: var(--library-primary);
   border: none;
   color: white;
   font-weight: 600;
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
 }

 .form-button.submit:hover {
   background-color: var(--library-primary-hover);
   transform: translateY(-2px);
   box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
 }

 .form-button.submit:disabled {
   background-color: var(--library-border-light);
   cursor: not-allowed;
   transform: none;
 }

 /* Color Picker */
 .color-options {
   display: flex;
   flex-wrap: wrap;
   gap: 1rem;
 }

 .color-option {
   width: 36px;
   height: 36px;
   border-radius: 50%;
   cursor: pointer;
   transition: all 0.2s ease;
   border: 2px solid transparent;
 }

 .color-option:hover {
   transform: scale(1.1);
 }

 .color-option.selected {
   border-color: white;
   box-shadow: 0 0 0 2px var(--library-primary);
 }

 /* Loading State */
 .loading-spellbook {
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
   height: 100%;
   color: var(--library-text-muted);
   font-size: 1.2rem;
 }

 .loading-spinner {
   width: 60px;
   height: 60px;
   border: 4px solid rgba(30, 58, 138, 0.2);
   border-left-color: var(--library-primary);
   border-radius: 50%;
   animation: spin 1s linear infinite;
   margin-bottom: 1rem;
 }

 /* Empty State */
 .empty-state {
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
   text-align: center;
   padding: 4rem 2rem;
   background-color: rgba(13, 25, 46, 0.2);
   border: 1px dashed var(--library-border-light);
   border-radius: 8px;
 }

 .empty-state h3 {
   font-family: 'Cinzel', serif;
   font-size: 1.6rem;
   color: var(--library-text-light);
   margin-bottom: 1rem;
 }

 .empty-state p {
   color: var(--library-text-muted);
   margin-bottom: 2rem;
   max-width: 500px;
 }

 .empty-state-button {
   display: flex;
   align-items: center;
   gap: 0.5rem;
   padding: 0.75rem 1.5rem;
   background-color: var(--library-primary);
   border: none;
   border-radius: 4px;
   color: white;
   font-weight: 600;
   cursor: pointer;
   transition: all 0.3s ease;
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
 }

 .empty-state-button:hover {
   background-color: var(--library-primary-hover);
   transform: translateY(-2px);
   box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 0 15px rgba(30, 58, 138, 0.3);
 }

 /* Responsive Styles */
 @media (max-width: 768px) {
   .spellbook-section {
     padding: 1rem;
   }

   .spellbook-grid {
     grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
     gap: 1rem;
   }

   .collections-grid {
     grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
     gap: 1rem;
   }

   .spellbook-search {
     width: 100%;
     max-width: 250px;
   }
 }